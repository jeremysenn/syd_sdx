= render partial: "shared/navbars/base_navbar" if current_user.admin?
= render partial: "shared/navbars/customer_user_navbar" if current_user.customer?

.container
  %br/
  %br
  .well
    = form_for @user do |f|
      %div.form-horizontal
        - @user.errors.each do |attr, msg|
          .alert.alert-danger
            <button type="button" class="close" data-dismiss="alert">Ã—</button>
            = "#{attr} #{msg}" if @user.errors[attr].first == msg
        - if current_user.admin?
          .btn-group-horizontal{"data-toggle" => "buttons"}
            %label.btn.btn-lg.btn-default{class: "#{@user.admin? ? 'active' : ''}"}
              = f.radio_button :role, 'admin', :checked => @user.admin?
              Admin User
            %label.btn.btn-lg.btn-default{class: "#{@user.basic? ? 'active' : ''}"}
              = f.radio_button :role, 'basic', :checked => @user.basic?
              Basic User
            %label.btn.btn-lg.btn-default{class: "#{@user.customer? ? 'active' : ''}"}
              = f.radio_button :role, 'customer', :checked => @user.customer?
              Customer User
        .row.form-group
          %div{:class => "col-sm-6"}
            = f.label :first_name, :class => "control-label"
            = f.text_field :first_name, :class => "form-control input-lg", placeholder: "First Name", :autofocus => true, required: true
          %div{:class => "col-sm-6"}
            = f.label :last_name, :class => "control-label"
            = f.text_field :last_name, :class => "form-control input-lg", placeholder: "Last Name", required: true
        .row.form-group
          %div{:class => "col-sm-6"}
            = f.label :company_name, :class => "control-label"
            = f.text_field :company_name, :class => "form-control input-lg", placeholder: "Company Name", required: true
          %div{:class => "col-sm-6"}
            = f.label :phone, :class => "control-label"
            = f.text_field :phone, :class => "form-control input-lg", placeholder: "Phone"
        .row.form-group
          %div{:class => "col-sm-6"}
            = f.label :username, :class => "control-label"
            = f.text_field :username, :class => "form-control input-lg", placeholder: "Username", readonly: true, required: true
          %div{:class => "col-sm-6"}
            = f.label :email, :class => "control-label"
            = f.text_field :email, :class => "form-control input-lg", placeholder: "Email", required: true
        -#
          .row.form-group
            %div{:class => "col-sm-6"}
              = f.label 'New password', :class => "control-label"
              = f.password_field :password, :class => "form-control input-lg", placeholder: "New Password"
        - if current_user.admin? and @user.customer?
          .row.form-group
            %div{:class => "col-sm-6"}
              = f.label :customer_guid, :class => "control-label"
              = f.text_field :customer_guid, :class => "form-control input-lg", placeholder: "Customer GUID"
            %div{:class => "col-sm-6"}
              = f.label "Yard ID", :class => "control-label"
              = f.text_field :yard_id, :class => "form-control input-lg", placeholder: "Yard ID"

        .row.form-group
          %div{:class => "col-sm-3"}
            = link_to 'Cancel', root_path, :class => "btn btn-lg btn-default btn-block"
          %div{:class => "col-sm-3"}
            = f.submit "Save", :class => "btn btn-lg btn-primary btn-block", data: { disable_with: "Please wait ..." }