.container
  =# image_tag('dragon_dog_logo_529x214.png', alt: 'dragon_dog_logo_529x214.png', class: 'img-responsive center-block')
  %br
  %br
  = form_for @user do |f|
    %div.form-horizontal
      - @user.errors.each do |attr, msg|
        .alert.alert-danger
          <button type="button" class="close" data-dismiss="alert">Ã—</button>
          = "#{attr} #{msg}" if @user.errors[attr].first == msg
      = f.hidden_field :company_id, value: current_user.company_id unless current_user.blank?
      - if current_user.blank? or not current_user.admin?
        = f.hidden_field :role, value: 'admin'
      - else
        .btn-group-horizontal{"data-toggle" => "buttons"}
          %label.btn.btn-lg.btn-default.active
            = f.radio_button :role, 'admin', :checked => true
            Admin User
          %label.btn.btn-lg.btn-default
            = f.radio_button :role, 'basic'
            Basic User
      .row.form-group.required
        %div{:class => "col-sm-6"}
          = f.label :first_name, :class => "control-label"
          = f.text_field :first_name, :class => "form-control input-lg", placeholder: "First Name", :autofocus => true, required: true
        %div{:class => "col-sm-6"}
          = f.label :last_name, :class => "control-label"
          = f.text_field :last_name, :class => "form-control input-lg", placeholder: "Last Name", required: true
      .row.form-group.required
        %div{:class => "col-sm-6"}
          = f.label :company_name, :class => "control-label"
          = f.text_field :company_name, value: "#{current_user.blank? ? '' : current_user.company.name}", :class => "form-control input-lg", placeholder: "Company Name", required: true
        %div{:class => "col-sm-6"}
          = f.label 'Email', :class => "control-label"
          = f.text_field :email, :class => "form-control input-lg", placeholder: "Email", required: true
      .row.form-group.required
        %div{:class => "col-sm-4"}
          = f.label :username, :class => "control-label"
          = f.text_field :username, :class => "form-control input-lg", placeholder: "Username", required: true
        %div{:class => "col-sm-4"}
          = f.label :password, :class => "control-label"
          = f.password_field :password, :class => "form-control input-lg", placeholder: "Password", required: true
        %div{:class => "col-sm-4"}
          = f.label :password_confirmation, :class => "control-label"
          = f.password_field :password_confirmation, :class => "form-control input-lg", placeholder: "Password Confirmation"#, required: true
      .row.form-group
        %div{:class => "col-sm-6"}
          = f.label "Phone", :class => "control-label"
          = f.text_field :phone, :class => "form-control input-lg", placeholder: "Phone", required: true
        %div{:class => "col-sm-6"}
          = f.label :account_number, :class => "control-label"
          = f.text_field :dragon_account_number, value: "#{current_user.blank? ? '' : current_user.dragon_account_number}", :class => "form-control input-lg", placeholder: "Scrap Dragon Account Number (leave blank if not sure)"
      .row.form-group
        %div{:class => "col-sm-6"}
          = f.label :address1, :class => "control-label required"
          = f.text_field :address1, :class => "form-control input-lg", placeholder: "Address 1", required: true
        %div{:class => "col-sm-6"}
          = f.label :address2, :class => "control-label"
          = f.text_field :address2, :class => "form-control input-lg", placeholder: "Address 2"
      .row.form-group.required
        %div{:class => "col-sm-4"}
          = f.label :city, :class => "control-label"
          = f.text_field :city, :class => "form-control input-lg", placeholder: "City", required: true
        %div{:class => "col-sm-4"}
          = f.label :state, :class => "control-label"
          = f.text_field :state, :class => "form-control input-lg", placeholder: "State", required: true
        %div{:class => "col-sm-4"}
          = f.label :zip, :class => "control-label"
          = f.text_field :zip, :class => "form-control input-lg", placeholder: "Zip", required: true

      .row.form-group
        %div{:class => "col-sm-6"}
          - if current_user.blank?
            .well
              %div
                = f.check_box :terms_of_service, required: true
                I have read and agree to the 
                = link_to 'Terms of Service', welcome_tos_path, target: '_blank'
                and 
                = link_to 'Privacy Policy', welcome_privacy_path, target: '_blank'
            %p.lead For new accounts, a confirmation link will be sent to your email address in order to activate your live account.
            = f.submit "Sign up", id: 'sign_up_button', :class => "btn btn-lg btn-primary", data: { disable_with: "Please wait ..." }#, disabled: true
            = link_to 'Cancel', :back, :class => "btn btn-lg btn-default"
            %br
            %br
            %p.lead= link_to 'Log In', login_path
          - else
            .well
              %div
                = f.check_box :terms_of_service, required: true
                User has read and agrees to the 
                = link_to 'Terms of Service', welcome_tos_path, target: '_blank'
                and 
                = link_to 'Privacy Policy', welcome_privacy_path, target: '_blank'
            %p.lead For new accounts, a confirmation link will be sent to the email address in order to activate the live account.
            = f.submit "Create user", :class => "btn btn-lg btn-primary", data: { disable_with: "Please wait ..." }
            = link_to 'Cancel', :back, :class => "btn btn-lg btn-default"
          